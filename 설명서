git init
git add README.md
git commit -m "first commit"
git branch -M main
git remote add origin https://github.com/wondora/js_board.git
git push -u origin main

----------------

ë°°í¬ ì„œë²„ì— ì••ì¶•ì„ í’€ê³  ì•„ë˜ ëª…ë ¹ì–´ë¡œ ì´ë¯¸ì§€ ìƒì„±í•˜ê³  ì»¨í…Œì´ë„ˆ ë§Œë“¤ë©´ ëœë‹¤.
nginx, mariadbëŠ” í˜¸ìŠ¤íŠ¸ osì— ì„¤ì¹˜ëœ ê±¸ë¡œ ì‚¬ìš©í–ˆë‹¤. ë”°ë¡œ ë„ì»¤ë¡œ í¬í•¨ì‹œì¼œë„ ëœë‹¤.
1. docker builder prune -af ìºì‹œ ë° ì°Œê±°ê¸° ì‚­ì œ
2. docker compose build --no-cache
3. ê¸°ì¡´ ì»¨í…Œì´ë„ˆë¥¼ ì¤‘ì§€í•˜ê³  ì‚­ì œí•œ í›„, ìƒˆë¡œ ë¹Œë“œëœ ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒˆ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. 
docker-compose up -d --force-recreate

docker compose exec django_app python manage.py makemigrations
docker compose exec django_app python manage.py migrate

ë²„ê·¸ê°€ ìƒê¸°ë©´ .envì—ì„œ debug = True ë³€ê²½í•˜ê³  ì—ëŸ¬ ë‚´ìš©ì„ ë³´ë©´ëœë‹¤.


pyíŒŒì¼ë“¤ì„ ìˆ˜ì •í•˜ë©´ makemigrations í•  í•„ìš”ì—†ë‹¤.
templates/0001.initial ì´ db ì„¤ê³„ë„ ì´ë‹¤. ë‹¤ì‹œ ì„¤ê³„í•˜ê³  ì‹¶ìœ¼ë©´ ì‚­ì œí•´ë„ ëœë‹¤.

ì£¼ë¡œ cursor AIë¡œ í…ŒìŠ¤íŠ¸í•˜ê³  ë²„ê·¸ì„ ì¡ì•˜ë‹¤.

--------------


ë””ë²„ê¹…í•˜ë©´ì„œ ì‚¬ìš©í•œ ëª…ëª…ë ¹ì–´ë“¤

docker-compose exec django_app python manage.py createsuperuser 
docker-compose exec django_app bash 1. docker compose build --no-cache 
docker compose build --no-cache --progress=plain (ì§„í–‰ê³¼ì •ì´ ìì„¸í•˜ê²Œ ë‚˜ì˜¨ë‹¤.) 

ì»¨í…Œì´ë„ˆ ë‹¤ì‹œ ì‹œì‘: ìƒˆë¡œ ë¹Œë“œëœ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.
docker compose up -d

ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¤ì‹œ ì‹œë„: ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ëœ í›„, ë‹¤ì‹œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìƒì„±í•˜ê³  ì ìš©í•©ë‹ˆë‹¤. 
docker compose exec django_app python manage.py makemigrations board 
docker compose exec django_app python manage.py migrate
docker compose exec django_app pip freeze ì»¨í…Œì´ë„ˆë‚´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ í™•ì¸
docker compose exec django_app bash > cat /app/templates/board/post_detail.html

---------------------------


âœ… ì†ë„ í–¥ìƒì„ ìœ„í•œ Docker Compose ê¸°ë°˜ ì„¤ì • íŒ
1. Gunicorn ì˜µì…˜ íŠœë‹ (Dockerfile ë˜ëŠ” entrypointì—ì„œ)
Dockerfile ë˜ëŠ” docker-compose.ymlì—ì„œ gunicorn ì‹¤í–‰ ëª…ë ¹ì„ ì•„ë˜ì²˜ëŸ¼ ì„¤ì •í•˜ì„¸ìš”:

command: >
  gunicorn yourproject.wsgi:application
  --workers=4
  --worker-class=gevent
  --bind=0.0.0.0:8000
  --timeout=60
  
2. Nginxë„ Dockerë¡œ ìš´ì˜ ì¤‘ì´ë¼ë©´? ì •ì  íŒŒì¼ ì§ì ‘ ì„œë¹™
Nginx ì»¨í…Œì´ë„ˆ ì„¤ì •ì—ì„œ /static/ì„ ì•„ë˜ì²˜ëŸ¼ ì„œë¹™:

nginx
ë³µì‚¬
í¸ì§‘
location /static/ {
    alias /app/static/;
    expires 30d;
    add_header Cache-Control "public";
}

--------------------------------------

  
  
âœ… 1. Gunicorn: Worker íŠœë‹ ì™¸ì—ë„
workers = 4 ì„¤ì •ì€ CPU ì½”ì–´ ìˆ˜ ê¸°ì¤€ìœ¼ë¡œ ì ì ˆí•©ë‹ˆë‹¤.
ğŸ‘‰ ê¶Œì¥ê°’: workers = (2 * CPUì½”ì–´ ìˆ˜) + 1

worker class ë³€ê²½ë„ ì¤‘ìš”í•©ë‹ˆë‹¤:

gunicorn --worker-class gevent --workers 4 yourproject.wsgi:application
worker class	íŠ¹ì§•
sync (ê¸°ë³¸ê°’)	ë‹¨ìˆœí•˜ì§€ë§Œ ë™ì‹œì— ë§ì€ ìš”ì²­ ì‹œ ë³‘ëª©
gevent	ë¹„ë™ê¸°, WebSocketÂ·IO ë§ì€ ì•±ì— ìœ ë¦¬
uvicorn.workers.UvicornWorker	ASGI ì•±ì— ìµœì  (FastAPI, Django+Channels ë“±)

âœ… 2. Nginx ìµœì í™”
NginxëŠ” ì •ì  íŒŒì¼, ìºì‹±, ì••ì¶•ì— ê´€ì—¬í•˜ë¯€ë¡œ ì„±ëŠ¥ì— í° ì˜í–¥ì„ ì¤ë‹ˆë‹¤.

âœ… ì •ì  íŒŒì¼ì€ Nginxê°€ ì§ì ‘ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ì •

location /static/ {
    alias /home/ubuntu/yourproject/static/;
    expires 30d;
    add_header Cache-Control "public";
}
ğŸ‘‰ Djangoê°€ ì•„ë‹Œ Nginxê°€ CSS, JS, ì´ë¯¸ì§€ ë“±ì„ ì§ì ‘ ì²˜ë¦¬í•˜ê²Œ ë˜ì–´ ì†ë„ í–¥ìƒ

âœ… gzip ì••ì¶• í™œì„±í™”

gzip on;
gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
ğŸ‘‰ JS/CSS/HTML ë“±ì„ ì „ì†¡í•  ë•Œ ì••ì¶•í•´ì„œ íŠ¸ë˜í”½ê³¼ ë¡œë”© ì‹œê°„ ì ˆê°

âœ… 3. Django ìì²´ íŠœë‹
âœ… DEBUG = False

# settings.py
DEBUG = False
ê°œë°œìš© DEBUG=TrueëŠ” ëª¨ë“  í…œí”Œë¦¿ ë° ì¿¼ë¦¬ë¥¼ ë§¤ ìš”ì²­ë§ˆë‹¤ ë‹¤ì‹œ ì½ìŒ

ë°˜ë“œì‹œ ALLOWED_HOSTSë„ ì„¤ì •í•´ì•¼ í•¨

âœ… Database Index í™•ì¸
ê²Œì‹œíŒì²˜ëŸ¼ ì¡°íšŒê°€ ë§ì€ ê²½ìš° created_at, category_id ë“±ì— index=True ì„¤ì •
ALTER TABLE board ADD INDEX idx_created_at (created_at);
ALTER TABLE board ADD INDEX idx_category_id (category_id);


ì¿¼ë¦¬ ì†ë„ë¥¼ 10~100ë°° í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŒ

âœ… 4. ìºì‹± ë„ì… (ê°„ë‹¨í•œ ë©”ëª¨ë¦¬ ìºì‹œ)
ê²Œì‹œê¸€ ëª©ë¡ ê°™ì´ ìì£¼ ë°”ë€Œì§€ ì•ŠëŠ” ë°ì´í„°ëŠ” 1~5ë¶„ ìºì‹œë¡œë„ í° íš¨ê³¼

ì„¤ì • (settings.py):

CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
    }
}
ë·°ì— ì ìš©:

from django.views.decorators.cache import cache_page

@cache_page(60 * 2)  # 2ë¶„
def post_list(request):
    ...
âœ… 5. ì •ì  íŒŒì¼ ë¯¸ë¦¬ ìˆ˜ì§‘

python manage.py collectstatic
ì •ì  íŒŒì¼ì„ ë§¤ë²ˆ ì²˜ë¦¬í•˜ì§€ ì•Šê³  Nginxê°€ ê³ ì • ê²½ë¡œì—ì„œ ì„œë¹™ ê°€ëŠ¥

âœ… ë³´ë„ˆìŠ¤: systemd ìë™ ì¬ì‹œì‘ ì„¤ì • (ì†ë„ëŠ” ì•„ë‹ˆì§€ë§Œ ì•ˆì •ì„±â†‘)

# /etc/systemd/system/gunicorn.service
Restart=always
ğŸ”š ìš”ì•½: ì§€ê¸ˆ ë°”ë¡œ ì ìš© ê°€ëŠ¥í•œ 5ê°€ì§€ ë¹ ë¥¸ ë°©ë²•
ë²ˆí˜¸	í•­ëª©	ì„¤ëª…
1	Gunicorn --worker-class gevent	ë¹„ë™ê¸° ì²˜ë¦¬ í–¥ìƒ
2	Nginxì—ì„œ ì •ì  íŒŒì¼ ì§ì ‘ ì„œë¹™	Django ë¶€í•˜ ê°ì†Œ
3	Nginx gzip ì••ì¶• í™œì„±í™”	ì‘ë‹µ ì†ë„ ì¦ê°€
4	Django DEBUG=False + index íŠœë‹	ë‚´ë¶€ ì²˜ë¦¬ ê°œì„ 
5	@cache_page ë°ì½”ë ˆì´í„° ì‚¬ìš©	ë·° ìºì‹±ìœ¼ë¡œ ë³‘ëª© í•´ì†Œ  